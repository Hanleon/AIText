import{s as e,r as t,a as n,o as a,c as o,b as r,w as s,d as l,v as i,e as c,t as u,f as d,g as p,F as g,h as y,i as v,n as b,m as h,j as f,k as m,l as x,p as S}from"./vendor.c76e0f7c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const w=t=>"object"==typeof t?e.exports.sha256(JSON.stringify(t)):e.exports.sha256(t),T=(t,n)=>e.exports.sha256.hmac.array(t,n),k=e=>(e instanceof ArrayBuffer?new Uint8Array(e):e).reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");async function $({secretId:t,secretKey:n,service:a,action:o,version:r,region:s,payload:l,host:i}){const c="TC3-HMAC-SHA256",u=Math.floor(Date.now()/1e3),d=new Date(1e3*u).toISOString().slice(0,10),p="application/json; charset=utf-8",g=`content-type:${p}\nhost:${i}\nx-tc-action:${o.toLowerCase()}\n`,y="content-type;host;x-tc-action",v=w(l),b=["POST","/","",g,y,v].join("\n"),h=`${d}/${a}/tc3_request`,f=w(b),m=[c,String(u),h,f].join("\n"),x=T("TC3"+n,d),S=T(x,a),$=T(S,"tc3_request"),C=(I=$,z=m,e.exports.sha256.hmac.hex(I,z));var I,z;return{authorization:`${c} Credential=${t}/${h}, SignedHeaders=${y}, Signature=${C}`,timestamp:u,contentType:p,debug:{hashedRequestPayload:v,hashedCanonicalRequest:f,stringToSign:m,secretDateHex:k(x),secretServiceHex:k(S),secretSigningHex:k($),signature:C}}}async function C(e){const{secretId:t,secretKey:n,token:a,region:o="ap-shanghai",service:r="tms",action:s="TextModeration",version:l="2020-12-29",content:i="",bizType:c,useBase64:u=!1,endpoint:d="/tms"}=e;if(!t||!n)throw new Error("secretId/secretKey 必填");const p={Content:u?(g=i,btoa(unescape(encodeURIComponent(g)))):i};var g;c&&(p.BizType=c);const y=JSON.stringify(p),v=`${r}.tencentcloudapi.com`,{authorization:b,timestamp:h,contentType:f,debug:m}=await $({secretId:t,secretKey:n,service:r,action:s,version:l,region:o,payload:y,host:v}),x={Authorization:b,"Content-Type":f,Host:"tms.tencentcloudapi.com","X-TC-Action":s,"X-TC-Timestamp":String(h),"X-TC-Version":l,"X-TC-Language":"zh-CN"};o&&(x["X-TC-Region"]=o),a&&(x["X-TC-Token"]=a);const S=await fetch(d,{method:"POST",headers:x,body:y}),w=await S.text();try{const e=JSON.parse(w);if(!S.ok)throw new Error(`HTTP ${S.status} ${w}`);return e}catch{throw new Error(`HTTP ${S.status} ${w}`)}}const I={class:"wrap"},z={class:"options"},K={key:0,class:"summary"},L=["disabled"],j={key:0},R={style:{color:"#d4380d"}},A={key:1,class:"list"},U={class:"meta"},E=["disabled","onClick"],H={class:"text"},V={key:1,class:"resp err"},_={__name:"DocxSplitter",props:{secretId:{type:String,required:!0},secretKey:{type:String,required:!0},region:{type:String,default:"ap-shanghai"},bizType:{type:String,default:""}},setup(e){const f=t([]),m=n({max:5e3,slack:1e3,trimEmpty:!0}),x=t(0),S=t(0),w=t(0),T=v((()=>f.value.reduce(((e,t)=>e+t.length),0)));async function k(e){var t;const n=null==(t=e.dataTransfer.files)?void 0:t[0];n&&await _(n)}async function $(e){var t;const n=null==(t=e.target.files)?void 0:t[0];n&&await _(n)}async function _(e){try{const t=function(e,t=5e3,n=200,a=!0){let o=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");a&&(o=o.split("\n").filter((e=>e.trim().length>0)).join("\n"));const r=[...o],s=r.length,l=[];let i=0;for(;i<s;){const e=Math.min(i+t,s),a=Math.max(i,e-Math.max(0,n));let o=-1;for(let t=e-1;t>=a;t--)if("\n"===r[t]){o=t;break}-1===o&&(o=e-0);const c=r.slice(i,o).join("").trimEnd();c.length>0&&l.push(c),i=o<s&&"\n"===r[o]?o+1:o}return l.map((e=>[...e].length<=t?e:[...e].slice(0,t).join("")))}(await async function(e){if(e.name.toLowerCase().endsWith(".txt"))return await e.text();if(e.name.toLowerCase().endsWith(".docx")){const t=await e.arrayBuffer(),{value:n}=await h.extractRawText({arrayBuffer:t});return n}throw new Error("仅支持 .docx 或 .txt")}(e),m.max,m.slack,m.trimEmpty);f.value=t.map((e=>({text:e,length:[...e].length,loading:!1,result:"",error:""})))}catch(t){alert("读取失败："+((null==t?void 0:t.message)||t))}}const q=t(!1),B=t(0),N=e;function O(e){let t="#f6ffed";if(!e.suggestion)return t;try{t="Pass"===e.suggestion?"#f6ffed":"#fff1f0"}catch{t="#fff1f0"}return t}async function P(e){const t=f.value[e];if(!t)return"";t.loading=!0,t.error="",t.result="",t.suggestion="";try{const e=await C({secretId:N.secretId,secretKey:N.secretKey,region:N.region,content:t.text,useBase64:!0,bizType:N.bizType});if(0==e.retcode){const n=e.Response.Suggestion||"";return t.suggestion=n,t.result=`Score:${e.Response.Score} - Suggestion:${n} - Label:${e.Response.Label} - SubLabel:${e.Response.SubLabel}`,n}return t.result=JSON.stringify(e,null,2),""}catch(n){return t.error=String((null==n?void 0:n.message)||n),""}finally{t.loading=!1}}async function D(){x.value=0,w.value=0,S.value=0,q.value=!0,B.value=0;for(let e=0;e<f.value.length;e++){"Pass"===await P(e)?x.value++:w.value++,B.value=e+1,S.value=e+1}q.value=!1}return(e,t)=>(a(),o("div",I,[t[9]||(t[9]=r("h2",null,"Word AI文本分片",-1)),r("div",{class:"uploader",onDragover:t[0]||(t[0]=s((()=>{}),["prevent"])),onDrop:s(k,["prevent"])},[t[4]||(t[4]=r("p",null,"拖拽 .docx 或 .txt 到这里，或",-1)),r("input",{type:"file",accept:".docx,.txt",onChange:$},null,32)],32),r("div",z,[t[5]||(t[5]=r("label",null,"最大字符数（Unicode）：",-1)),l(r("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>m.max=e),min:"100"},null,512),[[i,m.max,void 0,{number:!0}]]),t[6]||(t[6]=r("label",null,"就近换行余量：",-1)),l(r("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>m.slack=e),min:"0"},null,512),[[i,m.slack,void 0,{number:!0}]]),t[7]||(t[7]=r("label",null,"去除空白行：",-1)),l(r("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>m.trimEmpty=e)},null,512),[[c,m.trimEmpty]])]),f.value.length?(a(),o("div",K,[r("p",null,"总字符数："+u(T.value)+"，分成 "+u(f.value.length)+" 片。",1),r("button",{disabled:q.value,onClick:D},u(q.value?`检测中 ${B.value}/${f.value.length}...`:"发送全部检测"),9,L),S.value?(a(),o("p",j,[d("已检测："+u(S.value)+" 片， 通过：",1),r("b",null,u(x.value),1),t[8]||(t[8]=d("， 不通过：",-1)),r("b",R,u(w.value),1)])):p("",!0)])):p("",!0),f.value.length?(a(),o("div",A,[(a(!0),o(g,null,y(f.value,((e,t)=>(a(),o("div",{key:t,class:"chunk"},[r("div",U,[r("strong",null,"#"+u(t+1),1),r("span",null,"长度："+u(e.length),1),r("button",{class:"btn",disabled:e.loading,onClick:e=>P(t)},u(e.loading?"检测中...":"发送检测"),9,E)]),r("textarea",H,u(e.text),1),e.result?(a(),o("pre",{key:0,class:"resp",style:b({backgroundColor:O(e)})},"返回："+u(e.result),5)):p("",!0),e.error?(a(),o("pre",V,"错误："+u(e.error),1)):p("",!0)])))),128))])):p("",!0)]))},__scopeId:"data-v-047d3198"};const q={class:"wrap"},B={class:"row"},N={class:"row"},O={class:"row"},P={class:"row"},D={class:"row"},M=["disabled"],X={class:"result"},J={__name:"App",setup(e){const s=n({secretId:"",secretKey:"",region:"ap-shanghai",content:"测试",bizType:""}),c=t(!1),d=t("（等待请求...）");async function p(){if(s.secretId&&s.secretKey&&s.content){c.value=!0,d.value="请求中...";try{const e=await C({secretId:s.secretId,secretKey:s.secretKey,region:s.region,content:s.content,bizType:s.bizType,useBase64:!0});0==e.retcode?d.value=`Score:${e.Response.Score} - Suggestion:${e.Response.Suggestion} - Label:${e.Response.Label} - SubLabel:${e.Response.SubLabel}`:d.value=JSON.stringify(e,null,2)}catch(e){d.value="错误："+((null==e?void 0:e.message)||String(e))}finally{c.value=!1}}else d.value="请完整填写 SecretId / SecretKey / 文本"}return(e,t)=>(a(),o("div",q,[t[12]||(t[12]=r("h4",null,"V1.0.0 By Hanleon",-1)),t[13]||(t[13]=r("h5",null,[r("a",{href:"mailto:hanjiaqileon@126.com",class:"email-link"}," hanjiaqileon@126.com ")],-1)),t[14]||(t[14]=r("h2",null,"AI文本检测",-1)),r("div",B,[t[5]||(t[5]=r("label",null,"SecretId",-1)),l(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.secretId=e),type:"text",placeholder:"AKIDxxxxxxxx"},null,512),[[i,s.secretId,void 0,{trim:!0}]])]),r("div",N,[t[6]||(t[6]=r("label",null,"SecretKey",-1)),l(r("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.secretKey=e),type:"password",placeholder:"xxxxxxxx"},null,512),[[i,s.secretKey,void 0,{trim:!0}]])]),r("div",O,[t[8]||(t[8]=r("label",null,"Region",-1)),l(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.region=e),class:"region-select"},[...t[7]||(t[7]=[m('<option value="ap-beijing" data-v-b2bbd236>华北地区（北京）ap-beijing</option><option value="ap-guangzhou" data-v-b2bbd236>华南地区（广州）ap-guangzhou</option><option value="ap-hongkong" data-v-b2bbd236>港澳台地区（中国香港）ap-hongkong</option><option value="ap-nanjing" data-v-b2bbd236>华东地区（南京）ap-nanjing</option><option value="ap-shanghai" data-v-b2bbd236>华东地区（上海）ap-shanghai</option><option value="ap-singapore" data-v-b2bbd236>亚太东南（新加坡）ap-singapore</option><option value="ap-tokyo" data-v-b2bbd236>亚太东北（东京）ap-tokyo</option><option value="eu-frankfurt" data-v-b2bbd236>欧洲地区（法兰克福）eu-frankfurt</option><option value="na-ashburn" data-v-b2bbd236>美国东部（弗吉尼亚）na-ashburn</option><option value="na-siliconvalley" data-v-b2bbd236>美国西部（硅谷）na-siliconvalley</option>',10)])],512),[[f,s.region]])]),r("div",P,[t[9]||(t[9]=r("label",null,"文本",-1)),l(r("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.content=e),rows:"6",placeholder:"输入需要检测的文本"},null,512),[[i,s.content]])]),r("div",D,[t[10]||(t[10]=r("label",null,"BizType",-1)),l(r("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.bizType=e),type:"text",placeholder:"bizType"},null,512),[[i,s.bizType,void 0,{trim:!0}]])]),r("button",{disabled:c.value,onClick:p},u(c.value?"检测中...":"发送检测"),9,M),r("div",X,[t[11]||(t[11]=r("h3",null,"返回结果",-1)),r("pre",null,u(d.value),1)]),x(_,{"secret-id":s.secretId,"secret-key":s.secretKey,region:s.region,"biz-type":s.bizType},null,8,["secret-id","secret-key","region","biz-type"])]))},__scopeId:"data-v-b2bbd236"};S(J).mount("#app");
